<% posts.sort(function(a,b){ a = new Date(a.date); b = new Date(b.date); return b<a?-1:b>a?1:0; }).slice(0, 10) %>

<% for(var i = 0; i < posts.length; i++) { %>
  <% if(posts[i].slug == current.source) { %>
    <% var prev = posts[i-1] %>
    <% var next = posts[i+1] %>

    <nav class="nav nav--post row">
      <% if(prev) { %>
        <div class="nav--prev">
          <h2 class="nav--post-heading"><%- prev.title %></h2>
          <p class="dek dek--sm"><%- prev.description %></p>
        </div>
        <div class="nav--post-button">
          <a class="button--link" href="/<%= current.path[0] %>/<%= prev.slug %>">Previous</a>
        </div>
      <% } %>
      <% if(next) { %>
      <div class="nav--next">
        <h2 class="nav--post-heading"><%- next.title %></h2>
        <p class="dek dek--sm"><%- next.description %></p>
      </div>
      <div class="nav--post-button">
        <a class="button--link" href="/<%= current.path[0] %>/<%= next.slug %>">Next</a>
      </div>
      <% } %>
    </nav>

  <% } %>
<% } %>
